steps:
    - name: 'gradle:7.3-jdk8'
      volumes:
          - name: 'jar'
            path: '/jar'
      entrypoint: 'bash'
      args:
          - -c
          - |
              gradle buildFunction &&
              ls -R &&
              mv deploy /jar/deploy &&
              ls -R
      id: 'Build JAR'
    - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
      volumes:
          - name: 'jar'
            path: '/jar'
      args:
          - gcloud
          - functions
          - deploy
          - CoordinatesToTimezone
          - --region=us-central1
          - --trigger-http
          - --allow-unauthenticated
          - --source=/jar/deploy
          - --entry-point=com.jtschwartz.coordinatesToTimezone.CoordinatesToTimezone
          - --trigger-http
          - --runtime=java11
      id: 'Deploy'